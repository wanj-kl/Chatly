<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Chatly</title>
  <link rel="stylesheet" href="style.css" />
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
</head>
<body class="landing-body">

  <!-- Navigation Bar -->
  <header class="navbar">
    <h1 class="logo">Chatly</h1>
    <nav>
      <a href="#about">Home</a>
      <a href="#features">Features</a>
      <a href="login.html" style="color: #fffdfd"class="btn login-btn">Login </a>
    </nav>
  </header>

  <!-- Hero Section -->
  <section class="hero">
    <div class="hero-content">
      <h2>Protecting People from <span>AI Harm</span></h2>
      <p>Empowering families and individuals with a safe, responsible and human-centered AI experience.</p>
<p>
      Chatly is an intelligent safety layer that monitors and filters AI-generated content.
      It protects children and adults from exposure to harmful, biased or inappropriate material while
      keeping them engaged through creative and positive alternatives.
    </p>


      <div class="cta-buttons">
        <a href="signup.html?role=parent" class="btn primary">Sign Up as Parent</a>
        <a href="signup.html?role=child" class="btn secondary">Sign Up as Child</a>
      </div>
    </div>

    <div class="hero-image">
      <img src="family.jpg" alt="AI Guardian illustration">
    </div>
  </section>

 

  <!-- Features Section -->
  <section id="features" class="features">
    <h3>Key Features</h3>
    <div class="feature-grid">
      <div class="feature-card">
        <h4>Smart Filtering</h4>
        <p>Detects and blocks harmful or age-inappropriate AI responses using Metta reasoning.</p>
      </div>
      <div class="feature-card">
        <h4>Parental Control</h4>
        <p>Parents can monitor, customize and manage safe content access through a secure dashboard.</p>
      </div>
      <div class="feature-card">
        <h4>Friendly Interaction</h4>
        <p>Keeps users engaged with mini-games and safe alternatives instead of harsh restrictions.</p>
      </div>
      <div class="feature-card">
        <h4>Decentralized Trust</h4>
        <p>Uses blockchain transparency via CUDOS to ensure data and content safety logs remain secure.</p>
      </div>
    </div>
  </section>

  <!--Chat Interface -->
  <!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Guardian Agent</title>
    <link rel="stylesheet" href="/style.css"> 
</head>
<body>
    <div id="chat-container">
        <div class="message ai">
            <div class="avatar">G</div>
            <div class="text-content">Hello! I am your AI Guardian Agent, powered by Gemma. How can I help you today?</div>
        </div>
    </div>

    <div id="input-area">
        <form id="input-form">
            <textarea id="prompt-input" placeholder="Ask the agent anything..." required></textarea>
            <button type="submit" id="send-button" disabled>➤</button>
        </form>
    </div>

    <script>
        const chatContainer = document.getElementById('chat-container');
        const inputForm = document.getElementById('input-form');
        const promptInput = document.getElementById('prompt-input');
        const sendButton = document.getElementById('send-button');

        // Enable/Disable button based on input
        promptInput.addEventListener('input', () => {
            sendButton.disabled = promptInput.value.trim() === '';
        });

        // Function to create and append a new message bubble
        function appendMessage(role, text) {
            const messageDiv = document.createElement('div');
            messageDiv.classList.add('message', role);
            
            const avatarDiv = document.createElement('div');
            avatarDiv.classList.add('avatar');
            avatarDiv.textContent = role === 'user' ? 'You' : 'G';

            const textContentDiv = document.createElement('div');
            textContentDiv.classList.add('text-content');
            
            // Format text to handle line breaks naturally
            textContentDiv.innerHTML = text.replace(/\n/g, '<br>');

            messageDiv.appendChild(avatarDiv);
            messageDiv.appendChild(textContentDiv);
            chatContainer.appendChild(messageDiv);
            
            // Scroll to the latest message
            chatContainer.scrollTop = chatContainer.scrollHeight;
            return textContentDiv; // Return text container for loading state
        }

        inputForm.addEventListener('submit', async function(e) {
            e.preventDefault();
            const prompt = promptInput.value.trim();
            if (!prompt) return;

            // 1. Display User Message
            appendMessage('user', prompt);
            
            // 2. Clear Input and Disable Button
            promptInput.value = '';
            sendButton.disabled = true;

            // 3. Display AI Loading Message
            const aiTextContent = appendMessage('ai', '...').querySelector('.text-content');
            aiTextContent.textContent = 'Agent is thinking...';
            
            try {
                const response = await fetch('/chat', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ prompt: prompt })
                });

                const data = await response.json();

                if (response.ok) {
                    // 4. Update AI Message with Final Response
                    aiTextContent.innerHTML = data.response.replace(/\n/g, '<br>');
                } else {
                    // 4. Display Error
                    aiTextContent.innerHTML = 'Error: ' + (data.error || 'Failed to get a response.');
                }
            } catch (error) {
                aiTextContent.innerHTML = 'Network Error: Could not connect to the server.';
                console.error('Fetch error:', error);
            }
            
            // Re-enable button if input is not empty (though usually it is empty here)
            sendButton.disabled = promptInput.value.trim() === '';
        });
    </script>
</body>
</html>

  <!-- Footer -->
  <footer>
    <p>© 2025 Chatly</p>
  </footer>

</body>
</html>
